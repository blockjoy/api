apiVersion: secrets-store.csi.x-k8s.io/v1
kind: SecretProviderClass
metadata:
  name: blockvisor-api-secrets
spec:
  provider: gcp
  parameters:
    secrets: |
      - resourceName: "projects/blockjoy-prod/secrets/SENDGRID_API_KEY/versions/latest"
        path: "SENDGRID_API_KEY"
      - resourceName: "projects/blockjoy-prod/secrets/REFRESH_SECRET/versions/latest"
        path: "REFRESH_SECRET"
      - resourceName: "projects/blockjoy-prod/secrets/PWD_RESET_SECRET/versions/latest"
        path: "PWD_RESET_SECRET"
      - resourceName: "projects/blockjoy-prod/secrets/API_SERVICE_SECRET/versions/latest"
        path: "API_SERVICE_SECRET"
      - resourceName: "projects/blockjoy-prod/secrets/JWT_SECRET/versions/latest"
        path: "JWT_SECRET"
      - resourceName: "projects/blockjoy-prod/secrets/CONFIRMATION_SECRET/versions/latest"
        path: "CONFIRMATION_SECRET"
      - resourceName: "projects/blockjoy-prod/secrets/DATABASE_URL/versions/latest"
        path: "DATABASE_URL"
      - resourceName: "projects/blockjoy-prod/secrets/INVITATION_SECRET/versions/latest"
        path: "INVITATION_SECRET"
      - resourceName: "projects/blockjoy-prod/secrets/COOKBOOK_TOKEN/versions/latest"
        path: "COOKBOOK_TOKEN"
      - resourceName: "projects/blockjoy-prod/secrets/COOKBOOK_URL/versions/latest"
        path: "COOKBOOK_URL"
      - resourceName: "projects/blockjoy-prod/secrets/EMQX_BASE_URL/versions/latest"
        path: "EMQX_BASE_URL"
      - resourceName: "projects/blockjoy-prod/secrets/EMQX_APP_ID/versions/latest"
        path: "EMQX_APP_ID"
      - resourceName: "projects/blockjoy-prod/secrets/EMQX_SECRET/versions/latest"
        path: "EMQX_SECRET"
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: blockvisor-api-sa
  annotations:
      iam.gke.io/gcp-service-account: gke-workload@blockjoy-prod.iam.gserviceaccount.com
---